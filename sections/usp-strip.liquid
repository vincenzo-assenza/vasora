{%- assign eyebrow_tag = section.settings.eyebrow_tag | default: 'p' -%}
{%- assign heading_tag = section.settings.heading_tag | default: 'h2' -%}
{%- assign title_tag = section.settings.title_tag | default: 'h3' -%}
{%- assign copy_tag = section.settings.copy_tag | default: 'p' -%}
<section class="usp-strip" {% if section.settings.anchor_id != blank %} id="{{ section.settings.anchor_id | escape }}"{% endif %} style="--usp-bg: {{ section.settings.background_color | default: 'var(--color-background)' }}; --usp-fg: {{ section.settings.text_color | default: 'var(--color-foreground)' }}; --usp-muted: {{ section.settings.muted_text_color | default: 'var(--color-muted)' }}; padding-top: {{ section.settings.padding_top | default: 0 }}px; padding-bottom: {{ section.settings.padding_bottom | default: 0 }}px; margin-top: {{ section.settings.margin_top | default: 0 }}px; margin-bottom: {{ section.settings.margin_bottom | default: 0 }}px;">
  <div class="usp-strip__inner">
    {% if section.settings.heading != blank %}
      <div class="usp-strip__heading">
        <{{ eyebrow_tag }} class="usp-strip__eyebrow">{{ section.settings.eyebrow }}</{{ eyebrow_tag }}>
        <{{ heading_tag }}>{{ section.settings.heading }}</{{ heading_tag }}>
      </div>
    {% endif %}

    <div class="usp-strip__items">
      {% for block in section.blocks %}
        <div class="usp-strip__item" {{ block.shopify_attributes }}>
          <div class="usp-strip__icon" aria-hidden="true">
            {% case block.settings.icon %}
              {% when 'shipping' %}
                <svg viewBox="0 0 24 24" role="presentation" focusable="false">
                  <path d="M3 6h11v9H3z" fill="none" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M14 9h4l3 3v3h-7z" fill="none" stroke="currentColor" stroke-width="1.5"/>
                  <circle cx="7" cy="18" r="1.5" fill="none" stroke="currentColor" stroke-width="1.5"/>
                  <circle cx="17" cy="18" r="1.5" fill="none" stroke="currentColor" stroke-width="1.5"/>
                </svg>
              {% when 'returns' %}
                <svg viewBox="0 0 24 24" role="presentation" focusable="false">
                  <path d="M7 7h7a5 5 0 1 1 0 10h-2" fill="none" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M7 7l3-3m-3 3l3 3" fill="none" stroke="currentColor" stroke-width="1.5"/>
                </svg>
              {% when 'quality' %}
                <svg viewBox="0 0 24 24" role="presentation" focusable="false">
                  <path d="M12 3l7 3v6c0 4.4-3 7.9-7 9-4-1.1-7-4.6-7-9V6l7-3z" fill="none" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M9 12l2 2 4-4" fill="none" stroke="currentColor" stroke-width="1.5"/>
                </svg>
              {% when 'support' %}
                <svg viewBox="0 0 24 24" role="presentation" focusable="false">
                  <path d="M6 10a6 6 0 0 1 12 0v3a3 3 0 0 1-3 3h-2" fill="none" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M6 13v-2a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2z" fill="none" stroke="currentColor" stroke-width="1.5"/>
                </svg>
              {% when 'gift' %}
                <svg viewBox="0 0 24 24" role="presentation" focusable="false">
                  <path d="M4 8h16v11H4z" fill="none" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M12 8v11" fill="none" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M4 8h16l-2-4H6z" fill="none" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M10 5c0 1-1 2-2 2S6 6 6 5s1-2 2-2 2 1 2 2zm4 0c0 1 1 2 2 2s2-1 2-2-1-2-2-2-2 1-2 2z" fill="none" stroke="currentColor" stroke-width="1.5"/>
                </svg>
            {% endcase %}
          </div>
          <div class="usp-strip__text">
            {% if block.settings.title != blank %}
              <{{ title_tag }} class="usp-strip__title">{{ block.settings.title }}</{{ title_tag }}>
            {% endif %}
            {% if block.settings.copy != blank %}
              <{{ copy_tag }} class="usp-strip__copy">{{ block.settings.copy }}</{{ copy_tag }}>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

{% stylesheet %}
  .usp-strip {
    background: var(--usp-bg);
    color: var(--usp-fg);
    padding: var(--space-5) 0;
  }
  .usp-strip__inner {
    width: min(100% - 2 * var(--container-padding-inline), var(--container-max));
    margin: 0 auto;
    display: grid;
    gap: var(--space-5);
  }
  .usp-strip__heading {
    max-width: 560px;
    display: grid;
    gap: var(--space-2);
  }
  .usp-strip__eyebrow {
    text-transform: uppercase;
    letter-spacing: 0.18em;
    font-size: 0.72rem;
    color: var(--usp-muted);
    margin: 0;
  }
  .usp-strip__items {
    display: grid;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    gap: var(--space-4);
  }
  .usp-strip__item {
    display: flex;
    gap: var(--space-3);
    align-items: flex-start;
    padding: var(--space-4);
    border: 1px solid color-mix(in srgb, var(--usp-fg) 12%, transparent);
    border-radius: var(--radius-md);
    background: color-mix(in srgb, var(--usp-bg) 92%, white);
  }
  .usp-strip__icon {
    width: 40px;
    height: 40px;
    display: grid;
    place-items: center;
    border-radius: 999px;
    background: color-mix(in srgb, var(--usp-fg) 12%, transparent);
    color: var(--usp-fg);
  }
  .usp-strip__icon svg {
    width: 20px;
    height: 20px;
  }
  .usp-strip__title {
    margin: 0 0 var(--space-1);
    font-size: 1rem;
  }
  .usp-strip__copy {
    margin: 0;
    color: var(--usp-muted);
    font-size: 0.95rem;
  }

  @media (max-width: 1024px) {
    .usp-strip__items {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }
  @media (max-width: 640px) {
    .usp-strip {
      padding: var(--space-5) 0;
    }
    .usp-strip__items {
      grid-template-columns: 1fr;
    }
    .usp-strip__item {
      padding: var(--space-3);
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "USP strip",
  "settings": [
    {
      "type": "text",
      "id": "anchor_id",
      "label": "Anchor ID",
      "default": "value-props"
    },
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow",
      "default": "Perché Vasora"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Valore percepito, qualità reale"
    },
    {
      "type": "select",
      "id": "eyebrow_tag",
      "label": "Eyebrow tag",
      "default": "p",
      "options": [
        { "value": "h1", "label": "h1" },
        { "value": "h2", "label": "h2" },
        { "value": "h3", "label": "h3" },
        { "value": "h4", "label": "h4" },
        { "value": "h5", "label": "h5" },
        { "value": "h6", "label": "h6" },
        { "value": "p", "label": "p" },
        { "value": "span", "label": "span" },
        { "value": "div", "label": "div" }
      ]
    },
    {
      "type": "select",
      "id": "heading_tag",
      "label": "Heading tag",
      "default": "h2",
      "options": [
        { "value": "h1", "label": "h1" },
        { "value": "h2", "label": "h2" },
        { "value": "h3", "label": "h3" },
        { "value": "h4", "label": "h4" },
        { "value": "h5", "label": "h5" },
        { "value": "h6", "label": "h6" },
        { "value": "p", "label": "p" },
        { "value": "span", "label": "span" },
        { "value": "div", "label": "div" }
      ]
    },
    {
      "type": "select",
      "id": "title_tag",
      "label": "Item title tag",
      "default": "h3",
      "options": [
        { "value": "h1", "label": "h1" },
        { "value": "h2", "label": "h2" },
        { "value": "h3", "label": "h3" },
        { "value": "h4", "label": "h4" },
        { "value": "h5", "label": "h5" },
        { "value": "h6", "label": "h6" },
        { "value": "p", "label": "p" },
        { "value": "span", "label": "span" },
        { "value": "div", "label": "div" }
      ]
    },
    {
      "type": "select",
      "id": "copy_tag",
      "label": "Item copy tag",
      "default": "p",
      "options": [
        { "value": "h1", "label": "h1" },
        { "value": "h2", "label": "h2" },
        { "value": "h3", "label": "h3" },
        { "value": "h4", "label": "h4" },
        { "value": "h5", "label": "h5" },
        { "value": "h6", "label": "h6" },
        { "value": "p", "label": "p" },
        { "value": "span", "label": "span" },
        { "value": "div", "label": "div" }
      ]
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top",
      "min": 0,
      "max": 240,
      "step": 4,
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom",
      "min": 0,
      "max": 240,
      "step": 4,
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_top",
      "label": "Margin top",
      "min": 0,
      "max": 240,
      "step": 4,
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "label": "Margin bottom",
      "min": 0,
      "max": 240,
      "step": 4,
      "default": 0
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#F7F5F2"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#151515"
    },
    {
      "type": "color",
      "id": "muted_text_color",
      "label": "Muted text color",
      "default": "#5B5B5B"
    }
  ],
  "blocks": [
    {
      "type": "usp_item",
      "name": "USP item",
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "Icon",
          "options": [
            { "value": "shipping", "label": "Shipping" },
            { "value": "returns", "label": "Returns" },
            { "value": "quality", "label": "Quality" },
            { "value": "support", "label": "Support" },
            { "value": "gift", "label": "Gift" }
          ],
          "default": "shipping"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Spedizione rapida"
        },
        {
          "type": "text",
          "id": "copy",
          "label": "Copy",
          "default": "Consegna in 24/48h con tracking in tempo reale."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "USP strip",
      "category": "Aurum",
      "blocks": [
        {
          "type": "usp_item",
          "settings": {
            "icon": "shipping",
            "title": "Spedizione rapida",
            "copy": "Consegna 24/48h con tracking in tempo reale."
          }
        },
        {
          "type": "usp_item",
          "settings": {
            "icon": "returns",
            "title": "Reso facile",
            "copy": "14 giorni per cambiare idea, ritiro incluso."
          }
        },
        {
          "type": "usp_item",
          "settings": {
            "icon": "quality",
            "title": "Qualità premium",
            "copy": "Materiali selezionati e finiture curate." 
          }
        },
        {
          "type": "usp_item",
          "settings": {
            "icon": "support",
            "title": "Supporto dedicato",
            "copy": "Assistenza in chat entro 24h lavorative." 
          }
        }
      ]
    }
  ]
}
{% endschema %}
